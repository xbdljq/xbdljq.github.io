<!DOCTYPE html>
<!--
	特效所需要掌握的技术点
	scroll([data],fn):当用户滚动指定的元素时，会发生scroll事件
	scroll事件适用于所有可滚动的元素和window对象，
	例如：当页面滚动变化时，执行函数……
	$(window).scroll(function(){……});
	
	scrollTop([val]):获取/设置匹配元素相对滚动条顶部的偏移
	offset():获取匹配元素的相对偏移，返回的对象包含两个整型属性：top和left,以px像素为单位
	
-->
<html>

	<head>
		<meta charset="utf-8" />
		<title>网页定位导航特效</title>
		<link rel="stylesheet" type="text/css" href="css/demo1.css" />
		<link rel="stylesheet" type="text/css" href="../../../css/itemPage.css" />
	</head>

	<body>
		<div class="wrap_main">
			<div id="menu">
				<ul>
					<li>
						<a href="#item1" class="current">1F 男装</a>
					</li>
					<li>
						<a href="#item2">2F 女装 </a>
					</li>
					<li>
						<a href="#item3">3F 美妆 </a>
					</li>
					<li>
						<a href="#item4">4F 数码 </a>
					</li>
					<li>
						<a href="#item5">5F 母婴 </a>
					</li>
				</ul>
			</div>
			<div id="content">
				<h1>天天购物网</h1>
				<div id="item1" class="item">
					<h2>1F 男装</h2>
					<ul>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
					</ul>
				</div>
				<div id="item2" class="item">
					<h2>2F 女装</h2>
					<ul>
						<li>
							<a href="#"><img src="img/2F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/2F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/2F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/2F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/2F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/2F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/2F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/2F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/1F.jpg" /></a>
						</li>
					</ul>
				</div>
				<div id="item3" class="item">
					<h2>3F 美妆</h2>
					<ul>
						<li>
							<a href="#"><img src="img/3F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/3F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/3F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/3F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/3F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/3F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/3F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/3F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/3F.jpg" /></a>
						</li>
					</ul>
				</div>
				<div id="item4" class="item">
					<h2>4F 数码</h2>
					<ul>
						<li>
							<a href="#"><img src="img/4F.png" /></a>
						</li>
						<li>
							<a href="#"><img src="img/4F.png" /></a>
						</li>
						<li>
							<a href="#"><img src="img/4F.png" /></a>
						</li>
						<li>
							<a href="#"><img src="img/4F.png" /></a>
						</li>
						<li>
							<a href="#"><img src="img/4F.png" /></a>
						</li>
						<li>
							<a href="#"><img src="img/4F.png" /></a>
						</li>
						<li>
							<a href="#"><img src="img/4F.png" /></a>
						</li>
						<li>
							<a href="#"><img src="img/4F.png" /></a>
						</li>
						<li>
							<a href="#"><img src="img/4F.png" /></a>
						</li>
					</ul>
				</div>
				<div id="item5" class="item">
					<h2>5F 母婴</h2>
					<ul>
						<li>
							<a href="#"><img src="img/5F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/5F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/5F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/5F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/5F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/5F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/5F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/5F.jpg" /></a>
						</li>
						<li>
							<a href="#"><img src="img/5F.jpg" /></a>
						</li>
					</ul>
				</div>

			</div>
		</div>

		<!--<script src="js/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>-->

		<!--jquery实现方法-->
		<!--<script type="text/javascript">
			$(document).ready(function(){
				//滚动条发生滚动
				$(window).scroll(function(){					
					var top = $(document).scrollTop();
                    var menu = $("#menu");
                    var items = $("#content").find(".item");  //jq通过id来筛选比通过class来筛选效率要高
                    var currentId = ""; //当前所在的楼层（item)id

                    items.each(function(){
                    	var m = $(this);
                    	var itemTop = m.offset().top;
                    	if(top > itemTop - 300){
                    		currentId  = "#" + m.attr("id");
                    		
                    	}else{
                    		return false;
                    	}
                    });
                    //给相应的楼层的a设置current,取消其他链接的current
                    var currentLink = menu.find(".current");
                    if(currentId && currentLink.attr("href") != currentId){
                    	currentLink.removeClass("current");
                    	menu.find("[href=" + currentId + "]").addClass("current");
                    }
                    
				})
			})
		</script>-->

		<!--js的实现方法-->
		<script>
			//定义getByClassName函数，让函数实现根据class name获取对象并返回
			function getByClassName(obj, cls) {
				var elements = obj.getElementsByTagName("*");
				var result = [];
				for(var i = 0; i < elements.length; i++) {
					if(elements[i].className == cls) {
						result.push(elements[i]);
					}
				}
				return result;
			}

			function hasClass(obj, cls) {
				//判断className是否有我们传入的cls
				return obj.className.match(new RegExp("(\\s|^)" + cls + "(\\s|$)"));
			}

			function removeClass(obj, cls) {
				if(hasClass(obj, cls)) {
					//remove
					var reg = new RegExp("(\\s|^)" + cls + "(\\s|$)");
					obj.className = obj.className.replace(reg, "");
				}
			}

			//定义getByClassName函数，让函数实现给对象增加class 
			function addClass(obj, cls) {
				if(!hasClass(obj, cls)) {
					obj.className += " " + cls;
				}
			}

			window.onload = function() {

				window.onscroll = function() {
					var top = document.documentElement.scrollTop || document.body.scrollTop;

					var menus = document.getElementById("menu").getElementsByTagName("a");

					var items = getByClassName(document.getElementById("content"), "item");

					var currentId = "";

					for(var i = 0; i < items.length; i++) {
						var _item = items[i];
						var _itemTop = _item.offsetTop;
						if(top > _itemTop - 200) {
							currentId = _item.id;
						} else {
							break;
						}
					}

					//请补充此处代码，给正确的menu下的a元素class赋值current
					if(currentId) {
						for(var j = 0; j < menus.length; j++) {
							var _menu = menus[j];
							var _href = _menu.href.split("#");
							if(_href[_href.length - 1] != currentId) {
								removeClass(_menu, "current");
							} else {
								addClass(_menu, "current");
							}
						}
					}

				}
			}
		</script>

	</body>

</html>