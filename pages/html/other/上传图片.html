<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<div id="preview" style="float:left">
			<img id="imghead" class="logo-size" src='' />
		</div>
		<input id="filgo" type="file" name="logo" onchange="changeToop('filgo','imghead');" value="上传图片">
		<script>
			//定义id选择器
			function Id(id) {
				return document.getElementById(id);
			}
			//入口函数，两个参数分别为<input type='file'/>的id，还有一个就是图片的id，然后会自动根据文件id得到图片，然后把图片放到指定id的图片标签中
			function changeToop(fileid, imgid) {
				var file = Id(fileid);
				if(file.value == '') {
					//设置默认图片
					Id("myimg").src = 'http://sandbox.runjs.cn/uploads/rs/72/huvtowwn/zanwu.png';
				} else {
					preImg(fileid, imgid);
				}
			}
			//获取input[file]图片的url Important
			function getFileUrl(fileId) {
				var url;
				var file = Id(fileId);
				var agent = navigator.userAgent;
				if(agent.indexOf("MSIE") >= 1) {
					url = file.value;
				} else if(agent.indexOf("Firefox") > 0) {
					url = window.URL.createObjectURL(file.files.item(0));
				} else if(agent.indexOf("Chrome") > 0) {
					url = window.URL.createObjectURL(file.files.item(0));
				}
				return url;
			}
			//读取图片后预览
			function preImg(fileId, imgId) {
				var imgPre = Id(imgId);
				imgPre.src = getFileUrl(fileId);
			}
		</script>
	</body>

</html>